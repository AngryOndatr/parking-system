# –õ–æ–≥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî 24 —è–Ω–≤–∞—Ä—è 2026

**–î–∞—Ç–∞:** 2026-01-24  
**–§–∞–∑–∞:** –§–∞–∑–∞ 2 ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

---

## üìã –†–µ–∑—é–º–µ

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring Security –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤  
- –î–æ–±–∞–≤–ª–µ–Ω @ComponentScan –≤ BillingServiceApplication –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –±–∏–Ω–æ–≤  
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞–¥–∞—á–∏ #34  
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. **[–§–∞–∑–∞ 2] Billing: Endpoint —Ä–∞—Å—á–µ—Ç–∞ –∏ DTOs (/calculate) #34**

#### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞:

**A. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ Spring Security –≤ —Ç–µ—Å—Ç–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º:
  ```properties
  spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
  ```
- –û–±–Ω–æ–≤–ª–µ–Ω `BillingServiceApplication` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `@ComponentScan` –¥–ª—è –ø–∞–∫–µ—Ç–∞ `com.parking.billing`
- –û–±–µ—Å–ø–µ—á–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–∏–Ω–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, —Å–µ—Ä–≤–∏—Å–∞ –∏ –º–∞–ø–ø–µ—Ä–∞

**B. –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω):**
- `BillingController` - —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BillingApi` (OpenAPI-first)
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - `POST /api/v1/billing/calculate` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
  - `POST /api/v1/billing/pay` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞  
  - `GET /api/v1/billing/status` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å try-catch –±–ª–æ–∫–∞–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

**–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω):**
- `BillingService` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - `calculateFee()` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∫–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ç–∞—Ä–∏—Ñ–∞
  - `recordPayment()` - –∑–∞–ø–∏—Å—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
  - `isTicketPaid()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã –±–∏–ª–µ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ú–∞–ø–ø–µ—Ä (–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω):**
- `BillingMapper` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É Entity, Domain –∏ DTO —Å–ª–æ—è–º–∏
- –ú–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤:
  - `toFeeCalculationResponse()` 
  - `toPaymentResponse()`
  - `toPaymentStatusResponse()`

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω):**
- `GlobalExceptionHandler` —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –¥–ª—è:
  - `ParkingEventNotFoundException` ‚Üí 404
  - `TicketAlreadyPaidException` ‚Üí 400
  - `InsufficientPaymentException` ‚Üí 400
  - `TariffNotFoundException` ‚Üí 404
  - `IllegalArgumentException` ‚Üí 400
  - –û–±—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Üí 500

**C. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**

**BillingControllerIntegrationTest (7 —Ç–µ—Å—Ç–æ–≤):**
- ‚úÖ calculateFee_Success_TwoHours: —Ä–∞—Å—á–µ—Ç –¥–ª—è 2-—á–∞—Å–æ–≤–æ–π –ø–∞—Ä–∫–æ–≤–∫–∏
- ‚úÖ calculateFee_Success_OneAndHalfHours_RoundsUp: –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –ø–æ–ª–Ω—ã—Ö —á–∞—Å–æ–≤
- ‚úÖ calculateFee_Error404_TicketNotFound: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–∏–ª–µ—Ç–∞
- ‚úÖ calculateFee_Error400_TicketAlreadyPaid: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞  
- ‚úÖ processPayment_Success: —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ processPayment_Error400_InsufficientAmount: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Å—É–º–º—ã
- ‚úÖ getPaymentStatus_Success: –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤:**
- –†–µ–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ë–î H2 (@SpringBootTest)
- MockMvc –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- @Transactional –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ @BeforeEach
- –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- Security –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ `application-test.properties`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –≥–ª–∞–≤–Ω–æ–º –∫–ª–∞—Å—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ç–µ—Å—Ç–∞—Ö

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (–æ—Ü–µ–Ω–∫–∞):
- –°–ª–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞: ~90% (–≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã + —Å–ª—É—á–∞–∏ –æ—à–∏–±–æ–∫)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: 100% (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –ø–æ–∫—Ä—ã—Ç—ã)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥—Ö–æ–¥–∞ OpenAPI-First:**
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BillingApi`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö DTO –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ openapi.yaml
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É

### 2. **Domain-Driven Design:**
- –¢—Ä–µ—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Entity ‚Üí Domain ‚Üí DTO
- –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### 3. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏—è
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π –∏ –ø—É—Ç–µ–º

### 4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –ë–î H2
- Security –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –û—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

---

## üìù –ó–∞–º–µ—Ç–∫–∏

### –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

1. **Spring Security –≤ —Ç–µ—Å—Ç–∞—Ö:**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ `application-test.properties`
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ 403 Forbidden –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö

2. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - –î–æ–±–∞–≤–ª–µ–Ω `@ComponentScan(basePackages = {"com.parking.billing", "com.parking.billing_service"})` 
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–∏–Ω–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ —Å–µ—Ä–≤–∏—Å–∞
   - –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏ 404, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª—Å—è

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ @Import –¥–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–Ω–æ–≤
   - @SpringBootTest —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - MockMvc –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤:** –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ `com.parking.billing.controller`, –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `com.parking.billing_service`
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI:** DTO –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ `com.parking.billing_service.generated.model`
- **–¢–µ—Å—Ç–æ–≤–∞—è –ë–î:** H2 in-memory —Å —Ä–µ–∂–∏–º–æ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ PostgreSQL
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏:** @Transactional –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –∫–ª–∞—Å—Å–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –¢–µ–∫—É—â–∞—è —Ä–∞–±–æ—Ç–∞ - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **–û—à–∏–±–∫–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JsonNullable:**
   - Jackson –Ω–µ –º–æ–≥ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å `org.openapitools.jackson.nullable.JsonNullable`
   - –¢–µ—Å—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ JSON —Å –ø–æ–ª—è–º–∏ –≤–∏–¥–∞ `"subscriptionId": {"present": false}`
   - –û—à–∏–±–∫–∞: `Cannot construct instance of JsonNullable (no Creators, like default constructor, exist)`

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **TestJacksonConfig:**
   - –°–æ–∑–¥–∞–Ω `TestJacksonConfig.java` –≤ `src/test/java/com/parking/billing/config/`
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω `ObjectMapper` —Å `JsonNullableModule` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ OpenAPI —Ç–∏–ø–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω `JavaTimeModule` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—Ç/–≤—Ä–µ–º–µ–Ω–∏
   - –û–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `@Primary` bean –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö

2. **BillingControllerIntegrationTest:**
   - –î–æ–±–∞–≤–ª–µ–Ω `@Import(TestJacksonConfig.class)` –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–∞
   - –ó–∞–∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω `ObjectMapper` —á–µ—Ä–µ–∑ `@Autowired` –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
   - –£–¥–∞–ª–µ–Ω–∞ —Ä—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ObjectMapper –∏–∑ –º–µ—Ç–æ–¥–∞ `setUp()`
   - –£–¥–∞–ª–µ–Ω –ª–∏—à–Ω–∏–π –∏–º–ø–æ—Ä—Ç `@Import` –∏–∑ Spring Context

3. **–£–ª—É—á—à–µ–Ω–∏—è –≤ —Ü–µ–ª–æ–º:**
   - –£–±—Ä–∞–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@Import({BillingController.class, BillingService.class, BillingMapper.class})`
   - `@SpringBootTest` —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É `@ComponentScan` –≤ `BillingServiceApplication`

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JsonNullable –ø–æ–ª–µ–π
- ‚úÖ –¢–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã  
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ 500
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP —Å—Ç–∞—Ç—É—Å–æ–≤ (400, 404, 201, 200)

**–¢–µ—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
- –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Spring –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞  
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ H2 –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏–π (TicketAlreadyPaidException, InsufficientPaymentException)
- –í–æ–∑–≤—Ä–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö HTTP —Å—Ç–∞—Ç—É—Å–æ–≤

### –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:**
   - –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ 7 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –û–±–Ω–æ–≤–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ README
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

3. **Code Review:**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∑–∞–¥–∞—á–∏ #34
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ë—É–¥—É—â–∏–µ –∑–∞–¥–∞—á–∏ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –§–∞–∑—ã 2):

1. **Gate Control Service (#35):**
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Billing Service
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ

2. **–ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (#36):**
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WebClient
   - Circuit breakers
   - –õ–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Ç–∞—Ä–∏—Ñ–æ–≤ (DAILY, NIGHT, VIP)
   - –õ–æ–≥–∏–∫–∞ —Å–∫–∏–¥–æ–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
   - –≠–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π

---

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

**–§–∞–∑–∞ 2 ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
- [x] –ó–∞–¥–∞—á–∞ #32: Billing Service Entities & Repositories (100%)
- [x] –ó–∞–¥–∞—á–∞ #33: Billing Service Service Layer (100%)
- [x] –ó–∞–¥–∞—á–∞ #34: Billing Calculation Endpoint & Integration Tests (100%)
- [ ] –ó–∞–¥–∞—á–∞ #35: Gate Control Service Implementation (0%)
- [ ] –ó–∞–¥–∞—á–∞ #36: Inter-service Communication (0%)

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 2:** 60%  
**–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á:** 3 –∏–∑ 5

---

## üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (Security, ComponentScan)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–¥–∞—á–∏ #34
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (7 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥—Ö–æ–¥–∞ OpenAPI-first –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—è–º–∏
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API Gateway

**–í—Å–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 
- 1 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å 3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
- 1 —Å–µ—Ä–≤–∏—Å —Å 3 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏  
- 1 –º–∞–ø–ø–µ—Ä —Å 4 –º–µ—Ç–æ–¥–∞–º–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- 1 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å 5 —Ç–∏–ø–∞–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- 7 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- –ß–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ JavaDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ best practices Spring Boot
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI

---

**–ö–æ–Ω–µ—Ü —Å–µ—Å—Å–∏–∏:** –†–∞–±–æ—Ç–∞ –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π #34 –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤–æ –∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ
